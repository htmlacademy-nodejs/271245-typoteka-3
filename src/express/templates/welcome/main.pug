-
  const formatText = (str) => {
    const TEXT_MAX_STRING = 100;
    return str.length <= TEXT_MAX_STRING ? str : `${str.substring(0, TEXT_MAX_STRING)}...`;
  }
main.main-page
    h1.visually-hidden Ð“Ð»Ð°Ð²Ð½Ð°Ñ ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð»Ð¸Ñ‡Ð½Ð¾Ð³Ð¾ Ð±Ð»Ð¾Ð³Ð° Ð¢Ð¸Ð¿Ð¾Ñ‚ÐµÐºÐ°
    p
      | Ð­Ñ‚Ð¾ Ð¿Ñ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Ñ‚ÐµÐºÑÑ‚, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ð¹ Ð²Ð»Ð°Ð´ÐµÐ»ÐµÑ† Ð±Ð»Ð¾Ð³Ð° Ð¼Ð¾Ð¶ÐµÑ‚ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð¿Ð¸ÑÐ°Ñ‚ÑŒ ÑÐµÐ±Ñ ðŸ‘
    section.main-page__theme-list
      h2.visually-hidden Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ‚ÐµÐ¼
      ul.themes
        each category in categories
          li.themes__item
            a.themes__item-link(href=`/articles/category/${category.id}`) #{category.title}
              sup #{category.count}
    .main-page__section-flex
      section.main-page__hot.hot
        h2.hot__name(class=!mostDiscussedArticles.length ? `hot__name--empty` : ``)
          | Ð¡Ð°Ð¼Ð¾Ðµ Ð¾Ð±ÑÑƒÐ¶Ð´Ð°ÐµÐ¼Ð¾Ðµ 
          span.hot__icon.hot__icon--fire
        if mostDiscussedArticles.length
          ul.hot__list
            each discussedArticle of mostDiscussedArticles
              li.hot__list-item
                a.hot__list-link(href=`/articles/${discussedArticle.id}`) #{formatText(discussedArticle.announcement)}
                  sup.hot__link-sup #{discussedArticle.comments.length}
        else 
          p.hot__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
      section.main-page__last.last
        h2.last__name
          | ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸Ðµ ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸ 
          span.last__icon.last__icon--cloud
        if lastComments.length
          ul.last__list
            each lastComment of lastComments
              li.last__list-item
                img.last__list-image(src=(lastComment[`users.avatar`] ? `img/${lastComment[`users.avatar`]}` : 'img/default-avatar.png') width='20' height='20' alt='ÐÐ²Ð°Ñ‚Ð°Ñ€ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ')
                b.last__list-name #{lastComment[`users.name`]} #{lastComment[`users.surname`]}
                a.last__list-link(href=`/articles/${lastComment.publicationId}`) #{formatText(lastComment.text)}
        else
          p.hot__empty Ð—Ð´ÐµÑÑŒ Ð¿Ð¾ÐºÐ° Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½ÐµÑ‚...
    section.main-page__list.preview
      h2.visually-hidden Ð¡Ð¿Ð¸ÑÐ¾Ðº Ð¿Ñ€ÐµÐ²ÑŒÑŽ ÑÑ‚Ð°Ñ‚ÐµÐ¹
      ul.preview__list
        each article of articles
          li.preview__item
            ul.preview__breadcrumbs
              each category of article.categories
                li.preview__breadcrumbs-item
                  a.preview__breadcrumbs-link(href=`/articles/category/${category.id}`) #{category.title}
            if article.picture
              .preview__background
                img.preview__background-image(src=`img/${article.picture}` width='460' height='240' alt='Ð¤Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð½ÐµÐ±Ð¾ÑÐºÑ€ÐµÐ±Ð°')
            time.preview__time(datetime=article.createdAt) 
              +formatDate(article.createdAt, `DD.MM.YYYY`)
            h3.preview__name
              a.preview__name-link(href=`/articles/${article.id}`) #{article.title}
            p.preview__text #{article.announcement}
            a.preview__comment(href=`/articles/${article.id}`) ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¸
              span.preview__cloud
              b.preview__comment-count #{article.comments.length}
    +pagination(page, totalPages, 2, `?`)